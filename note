
class User extends Authenticatable
{
    public function employee()
    {
        return $this->hasOne(Employee::class);
    }
}




use Illuminate\Foundation\Auth\User as Authenticatable;

class Employee extends Authenticatable
{
    protected $hidden = ['password'];

    public function user()
    {
        return $this->belongsTo(User::class);
    }
}




AuthenticatedSessionController.php

use App\Models\User;
use App\Models\Employee;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Hash;

public function store(Request $request)
{
    $request->validate([
        'email' => ['required', 'email'],
        'password' => ['required'],
    ]);

    // 1️⃣ Try USERS table first
    $user = User::where('email', $request->email)->first();

    if ($user && $user->password && Hash::check($request->password, $user->password)) {
        Auth::login($user);
        return redirect()->intended('/dashboard');
    }

    // 2️⃣ Try EMPLOYEES table
    $employee = Employee::where('email', $request->email)->first();

    if ($employee && Hash::check($request->password, $employee->password)) {
        Auth::login($employee->user); // login USER
        return redirect()->intended('/dashboard');
    }

    // 3️⃣ Fail
    return back()->withErrors([
        'email' => 'Invalid email or password',
    ]);
}

